"use strict";(self.webpackChunkFood_Recipe=self.webpackChunkFood_Recipe||[]).push([[623],{7623:(G,u,r)=>{r.r(u),r.d(u,{RecipesModule:()=>B});var l=r(6814),b=r(8693),e=r(5879),v=r(7700),h=r(2425),_=r(4400),f=r(7862),s=r(95),T=r(8805),x=r(8937),d=r(157),A=r(7210);function y(i,a){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function R(i,a){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"img",41),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("src",o.pathHttps+t.imagePath,e.LSH)}}function C(i,a){1&i&&(e.TgZ(0,"div",42)(1,"p",43),e._uU(2,"Not Image Available"),e.qZA()())}function U(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function q(i,a){if(1&i&&(e.ynx(0),e.YNc(1,U,2,1,"span",28),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.category)}}function I(i,a){1&i&&(e.ynx(0),e.TgZ(1,"span",43),e._uU(2," No Category "),e.qZA(),e.BQk())}const w=function(i){return["/dashboard/admin/recipes/view/",i]},N=function(i){return["/dashboard/admin/recipes/edit/",i]};function J(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",29),e.YNc(4,R,2,1,"div",23),e.YNc(5,C,3,0,"div",30),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"trimDescription"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"td"),e.YNc(18,q,2,1,"ng-container",23),e.YNc(19,I,3,0,"ng-container",23),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td")(23,"div",31)(24,"a",32),e._UZ(25,"i",33),e.qZA(),e.TgZ(26,"ul",34)(27,"li")(28,"a",35)(29,"span"),e._UZ(30,"i",36),e.qZA(),e.TgZ(31,"span",37),e._uU(32,"View"),e.qZA()()(),e.TgZ(33,"li")(34,"a",35)(35,"span"),e._UZ(36,"i",38),e.qZA(),e.TgZ(37,"span",37),e._uU(38,"Edit"),e.qZA()()(),e.TgZ(39,"li")(40,"a",39),e.NdJ("click",function(){const p=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.openDeleteDialog(p))}),e.TgZ(41,"span"),e._UZ(42,"i",40),e.qZA(),e.TgZ(43,"span",37),e._uU(44,"Delete"),e.qZA()()()()()()()}if(2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("ngIf",t.imagePath),e.xp6(1),e.Q6J("ngIf",!t.imagePath),e.xp6(2),e.Oqu(e.lcZ(8,12,t.description)),e.xp6(3),e.Oqu(t.price),e.xp6(2),e.Oqu(e.xi3(13,14,t.creationDate,"dd-MM-yyyy , hh:mm a")),e.xp6(3),e.Oqu(e.xi3(16,17,t.modificationDate,"dd-MM-yyyy , hh:mm a")),e.xp6(3),e.Q6J("ngIf",t.category.length>0),e.xp6(1),e.Q6J("ngIf",0==t.category.length),e.xp6(2),e.Oqu(t.tag.name),e.xp6(7),e.Q6J("routerLink",e.VKq(20,w,t.id)),e.xp6(6),e.Q6J("routerLink",e.VKq(22,N,t.id))}}function D(i,a){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,J,45,24,"tr",28),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tableData)}}function S(i,a){1&i&&(e.TgZ(0,"div",2)(1,"div",44),e._UZ(2,"app-no-data"),e.qZA()())}const F=function(){return["/dashboard/admin/recipes/add"]},Q=function(){return[5,10,25]};let z=(()=>{class i{constructor(t,o,n,p){this.dialog=t,this.toastr=o,this._recipeService=n,this._helperService=p,this.searchValue="",this.isView=!1,this.pageNumber=1,this.pageSize=5,this.tableData=[],this.tags=[],this.pathHttps="https://upskilling-egypt.com:443/"}ngOnInit(){this.getTableData(),this.getAllTags()}getTableData(){this._recipeService.getRecipes({pageSize:this.pageSize,pageNumber:this.pageNumber,tagId:this.tagId,name:this.searchValue}).subscribe({next:o=>{console.log(o),this.tableResponse=o,this.tableData=this.tableResponse?.data,console.log(this.tableData?.length);let n=this.tableResponse?.totalNumberOfRecords;localStorage.setItem("adminRecipes",n.toLocaleString())}})}handlePageEvent(t){console.log(t),this.pageNumber=t.pageIndex,this.pageSize=t.pageSize,this.getTableData()}onAddNewRecipe(t){this._recipeService.addRecipe(t).subscribe({next:o=>{console.log(o)},error:o=>{console.log(o.error.message),this.toastr.error(o.error.message,"error!")},complete:()=>{this.toastr.success(this.message,"Done!"),this.getTableData()}})}openDeleteDialog(t){console.log(t),this.dialog.open(b.F,{data:t,width:"30%"}).afterClosed().subscribe(n=>{console.log("The dialog was closed"),console.log(n),n&&(console.log(n.id),this.onDeleteRecipe(n.id))})}onDeleteRecipe(t){this._recipeService.deleteRecipe(t).subscribe({next:o=>{console.log(o)},error:o=>{console.log(o.error.message),this.toastr.error(o.error.message,"error!")},complete:()=>{this.toastr.success(this.message,"Done!"),this.getTableData()}})}getAllTags(){this._helperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.uw),e.Y36(h._W),e.Y36(_.j),e.Y36(f.W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipes"]],decls:60,vars:12,consts:[["id","page-header",1,"my-3"],[1,"container"],[1,"row"],[1,"col-md-9","d-flex","align-items-center"],[1,"px-5"],[1,"col-md-3"],["src","assets/menu-avatar.svg","alt","",1,"w-75","mb-0"],["id","header-table",1,"my-3"],[1,"container-fluid"],[1,"d-flex","gap-5","justify-content-between","align-items-center"],[1,"flex-grow-1"],[1,"col-md-10"],["type","text","placeholder","search by name ","aria-label","search","aria-describedby","basic-addon1",1,"form-control","rounded",3,"ngModel","ngModelChange","keyup.enter"],[1,"col-md-2"],["aria-label","Default select example",1,"form-select",3,"ngModel","ngModelChange","change"],["selected",""],[3,"value",4,"ngFor","ngForOf"],[1,""],["type","submit",1,"primary",3,"routerLink"],["id","table",1,"my-4"],[1,"d-flex","justify-content-between","content-table"],[1,"table","table-hover"],["scope","col"],[4,"ngIf"],["class","row",4,"ngIf"],["aria-label","Select page",1,"demo-paginator",3,"length","pageSize","pageSizeOptions","pageIndex","page"],["paginator",""],[3,"value"],[4,"ngFor","ngForOf"],[1,"w-25"],["class","no-img",4,"ngIf"],[1,"dropdown","text-center"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","text-muted"],[1,"fa-solid","fa-ellipsis","fa-lg","text-main"],[1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"],[1,"fa-regular","fa-eye","text-main"],[1,"p-2"],[1,"fa-regular","fa-pen-to-square","text-main"],[1,"dropdown-item",3,"click"],[1,"fa-solid","fa-trash-can","text-danger"],["alt","",1,"w-25","rounded-lg","border-success",3,"src"],[1,"no-img"],[1,"text-muted"],[1,"col-md-6","mx-auto"]],template:function(o,n){1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),e._uU(6,"Recipes "),e.TgZ(7,"span"),e._uU(8,"Items!"),e.qZA()(),e.TgZ(9,"p"),e._uU(10," You can now add your items that any user can order it from the Application and you can edit "),e.qZA()()(),e.TgZ(11,"div",5)(12,"div"),e._UZ(13,"img",6),e.qZA()()()()(),e.TgZ(14,"section",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"div",2)(19,"div",11)(20,"input",12),e.NdJ("ngModelChange",function(c){return n.searchValue=c})("keyup.enter",function(){return n.getTableData()}),e.qZA()(),e.TgZ(21,"div",13)(22,"select",14),e.NdJ("ngModelChange",function(c){return n.tagId=c})("change",function(){return n.getTableData()}),e.TgZ(23,"option",15),e._uU(24,"All"),e.qZA(),e.YNc(25,y,2,2,"option",16),e.qZA()()()(),e.TgZ(26,"div",17)(27,"button",18),e._uU(28," Add New Recipe "),e.qZA()()()()(),e.TgZ(29,"section",19)(30,"div",8)(31,"div",20)(32,"p"),e._uU(33,"Name"),e.qZA(),e.TgZ(34,"p"),e._uU(35,"Actions"),e.qZA()(),e.TgZ(36,"table",21)(37,"thead")(38,"tr"),e._UZ(39,"th",22),e.TgZ(40,"th",22),e._uU(41,"Image"),e.qZA(),e.TgZ(42,"th",22),e._uU(43,"Description"),e.qZA(),e.TgZ(44,"th",22),e._uU(45,"Price"),e.qZA(),e.TgZ(46,"th",22),e._uU(47,"Creation Date"),e.qZA(),e.TgZ(48,"th",22),e._uU(49,"Modification Date"),e.qZA(),e.TgZ(50,"th",22),e._uU(51,"Category"),e.qZA(),e.TgZ(52,"th",22),e._uU(53,"Tag"),e.qZA(),e._UZ(54,"th",22),e.qZA()(),e.YNc(55,D,2,1,"tbody",23),e.qZA(),e.YNc(56,S,3,0,"div",24),e.TgZ(57,"div")(58,"mat-paginator",25,26),e.NdJ("page",function(c){return n.handlePageEvent(c)}),e.qZA()()()()),2&o&&(e.xp6(20),e.Q6J("ngModel",n.searchValue),e.xp6(2),e.Q6J("ngModel",n.tagId),e.xp6(3),e.Q6J("ngForOf",n.tags),e.xp6(2),e.Q6J("routerLink",e.DdM(10,F)),e.xp6(28),e.Q6J("ngIf",n.tableData.length>0),e.xp6(1),e.Q6J("ngIf",0==n.tableData.length),e.xp6(2),e.Q6J("length",null==n.tableResponse?null:n.tableResponse.totalNumberOfRecords)("pageSize",null==n.tableResponse?null:n.tableResponse.pageSize)("pageSizeOptions",e.DdM(11,Q))("pageIndex",null==n.tableResponse?null:n.tableResponse.pageNumber))},dependencies:[l.sg,l.O5,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.On,T.NW,x.d,d.rH,l.uU,A.V]})}return i})();var O=r(6208),g=r(4426);function Y(i,a){1&i&&(e.TgZ(0,"h2"),e._uU(1,"View "),e.TgZ(2,"span",32),e._uU(3,"the Recipe !"),e.qZA()())}function P(i,a){1&i&&(e.TgZ(0,"h2"),e._uU(1,"Edit "),e.TgZ(2,"span",32),e._uU(3,"the Recipe !"),e.qZA()())}function M(i,a){1&i&&(e.TgZ(0,"h2"),e._uU(1,"Fill "),e.TgZ(2,"span",32),e._uU(3,"the Recipe !"),e.qZA()())}function V(i,a){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function L(i,a){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function j(i,a){1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"i",34),e.TgZ(2,"div"),e._uU(3," Drag & Drop or "),e.TgZ(4,"span",32),e._uU(5," Choose a Item Image to Upload "),e.qZA()()())}function k(i,a){if(1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"img",35),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgSrc,e.LSH)}}function E(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",36),e.NdJ("removed",function(){const p=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onRemove(p))}),e.qZA()}if(2&i){const t=a.$implicit;e.Q6J("removable",!0)("file",t)}}function H(i,a){1&i&&(e.TgZ(0,"button",37),e._uU(1,"Save"),e.qZA())}const Z=function(){return["/dashboard/admin/recipes"]};let m=(()=>{class i{constructor(t,o,n,p,c){this._helperService=t,this.toastr=o,this._recipeService=n,this._router=p,this._activatedRoute=c,this.tags=[],this.categories=[],this.recipeForm=new s.cw({name:new s.NI(null),description:new s.NI(null),price:new s.NI(null),tagId:new s.NI(null),categoriesIds:new s.NI(null)}),this.pathHttps="https://upskilling-egypt.com:443/",this.isUpdatedPage=!1,this.isViewPage=!1,this.files=[],this.recipeId=c.snapshot.params.id,this.recipeId?(this.isUpdatedPage=!0,this.getRecipeById(this.recipeId)):this.isUpdatedPage=!1,this._activatedRoute.url.subscribe(K=>{this.isViewPage=K.some(W=>"view"===W.path),console.log(this.isViewPage),this.disableFormControls()})}ngOnInit(){this.getAllTags(),this.getAllCategories()}onSubmit(t){console.log(t.value);let o=new FormData;o.append("name",t.value.name),o.append("price",t.value.price),o.append("description",t.value.description),o.append("categoriesIds",t.value.categoriesIds),o.append("tagId",t.value.tagId),o.append("recipeImage",this.imgSrc,this.imgSrc.name),this.recipeId?this.edit(this.recipeId,o):this.add(o)}add(t){this._recipeService.addRecipe(t).subscribe({next:o=>{console.log(o)},error:o=>{console.log(o.error.message),this.toastr.error(o.error.message,"error!")},complete:()=>{this.toastr.success(this.message,"Done!"),this._router.navigate(["/dashboard/admin/recipes"])}})}edit(t,o){this._recipeService.editRecipe(t,o).subscribe({next:n=>{console.log(n)},error:n=>{console.log(n.error.message),this.toastr.error(n.error.message,"error!")},complete:()=>{this.toastr.success(this.message,"Done!"),this._router.navigate(["/dashboard/admin/recipes"])}})}getAllTags(){this._helperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}getAllCategories(){this._helperService.getCategories().subscribe({next:t=>{console.log(t),this.categories=t.data}})}onSelect(t){console.log(t),this.imgSrc=t.addedFiles[0],this.files.push(...t.addedFiles)}onRemove(t){console.log(t),this.files.splice(this.files.indexOf(t),1)}getRecipeById(t){this._recipeService.getRecipeById(t).subscribe({next:o=>{console.log(o),this.recipeData=o},error:o=>{},complete:()=>{this.imgSrc=this.pathHttps+this.recipeData.imagePath,this.recipeForm.patchValue({name:this.recipeData?.name,price:this.recipeData?.price,description:this.recipeData?.description,tagId:this.recipeData?.tag.id,categoriesIds:this.recipeData?.category[0].id})}})}disableFormControls(){this.isViewPage&&(this.recipeForm.get("name")?.disable(),this.recipeForm.get("price")?.disable(),this.recipeForm.get("description")?.disable(),this.recipeForm.get("categoriesIds")?.disable(),this.recipeForm.get("tagId")?.disable(),this.recipeForm.get("recipeImage")?.disable())}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(f.W),e.Y36(h._W),e.Y36(_.j),e.Y36(d.F0),e.Y36(d.gz))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-edit-recipe"]],decls:60,vars:16,consts:[["id","recipes-header",1,"my-3"],[1,"container"],[1,"row"],[1,"col-md-9","d-flex","align-items-center"],[1,"px-5"],[4,"ngIf"],[1,"col-md-3","d-flex","align-items-center"],["type","submit",1,"primary",3,"routerLink"],[1,"fa-solid","fa-arrow-right","pl-2"],[1,"card-auth"],[3,"formGroup","ngSubmit"],[1,"col-md-8"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text","h-100"],[1,"fa-solid","fa-pen"],["formControlName","name","type","text","placeholder","Enter Recipe Name","aria-label","Name","aria-describedby","basic-addon1",1,"form-control"],[1,"col-md-4"],[1,"fa-solid","fa-money-check-dollar"],["formControlName","price","type","text","placeholder","Enter Price","aria-label","price","aria-describedby","basic-addon1",1,"form-control"],[1,"col-md-6"],["id","basic-addon1",1,"input-group-text","h-100","text-greyLight"],["formControlName","tagId","aria-label","Default select example",1,"form-select"],["selected",""],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","categoriesIds","aria-label","Default select example",1,"form-select"],["formControlName","description","id","exampleFormControlTextarea1","placeholder","Enter Description*","rows","3",1,"form-control"],[3,"multiple","disabled","change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","gap-2","my-4"],["type","submit","class","primary px-4",4,"ngIf"],["type","button",1,"outline-primary",3,"routerLink"],[1,"text-main"],[3,"ngValue"],[1,"fa-solid","fa-upload","fa-3x","mb-3"],["alt","",1,"w-25",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed"],["type","submit",1,"primary","px-4"]],template:function(o,n){1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.YNc(5,Y,4,0,"h2",5),e.YNc(6,P,4,0,"h2",5),e.YNc(7,M,4,0,"h2",5),e.TgZ(8,"p"),e._uU(9," you can now fill the meals easily using the table and form , click here and sill it with the table ! "),e.qZA()()(),e.TgZ(10,"div",6)(11,"div")(12,"button",7),e._uU(13," All Recipes "),e._UZ(14,"i",8),e.qZA()()()()()(),e.TgZ(15,"section",9)(16,"form",10),e.NdJ("ngSubmit",function(){return n.onSubmit(n.recipeForm)}),e.TgZ(17,"div",2)(18,"div",11)(19,"div",12)(20,"div",13)(21,"span",14),e._UZ(22,"i",15),e.qZA()(),e._UZ(23,"input",16),e.qZA()(),e.TgZ(24,"div",17)(25,"div",12)(26,"div",13)(27,"span",14),e._UZ(28,"i",18),e.qZA()(),e._UZ(29,"input",19),e.qZA()(),e.TgZ(30,"div",20)(31,"div",12)(32,"div",13)(33,"span",21),e._uU(34," Tags: "),e.qZA()(),e.TgZ(35,"select",22)(36,"option",23),e._uU(37,"All"),e.qZA(),e.YNc(38,V,2,2,"option",24),e.qZA()()(),e.TgZ(39,"div",20)(40,"div",12)(41,"div",13)(42,"span",21),e._uU(43," Categories: "),e.qZA()(),e.TgZ(44,"select",25)(45,"option",23),e._uU(46,"All"),e.qZA(),e.YNc(47,L,2,2,"option",24),e.qZA()()(),e.TgZ(48,"div",12),e._UZ(49,"div",13)(50,"textarea",26),e.qZA(),e.TgZ(51,"div")(52,"ngx-dropzone",27),e.NdJ("change",function(c){return n.onSelect(c)}),e.YNc(53,j,6,0,"ngx-dropzone-label",5),e.YNc(54,k,2,1,"ngx-dropzone-label",5),e.YNc(55,E,1,2,"ngx-dropzone-image-preview",28),e.qZA()(),e.TgZ(56,"div",29),e.YNc(57,H,2,0,"button",30),e.TgZ(58,"button",31),e._uU(59," Cancel "),e.qZA()()()()()),2&o&&(e.xp6(5),e.Q6J("ngIf",n.isViewPage),e.xp6(1),e.Q6J("ngIf",n.isUpdatedPage&&!n.isViewPage),e.xp6(1),e.Q6J("ngIf",!n.isUpdatedPage),e.xp6(5),e.Q6J("routerLink",e.DdM(14,Z)),e.xp6(4),e.Q6J("formGroup",n.recipeForm),e.xp6(22),e.Q6J("ngForOf",n.tags),e.xp6(9),e.Q6J("ngForOf",n.categories),e.xp6(5),e.Q6J("multiple",!1)("disabled",n.isViewPage),e.xp6(1),e.Q6J("ngIf",!n.imgSrc),e.xp6(1),e.Q6J("ngIf",n.imgSrc),e.xp6(1),e.Q6J("ngForOf",n.files),e.xp6(2),e.Q6J("ngIf",!n.isViewPage),e.xp6(1),e.Q6J("routerLink",e.DdM(15,Z)))},dependencies:[l.sg,l.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,g._f,g.NP,g.sv,d.rH],styles:["#recipes-header[_ngcontent-%COMP%]{background-color:#f0ffef;border-radius:16px;padding:1.5rem 3rem}#recipes-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:30.25rem}#recipes-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic;font-weight:400;font-size:20px}"]})}return i})();const $=[{path:"",component:z},{path:"add",component:m},{path:"edit/:id",component:m},{path:"view/:id",component:m}];let B=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[l.ez,O.m,d.Bz.forChild($)]})}return i})()}}]);
